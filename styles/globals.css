@tailwind base;
@tailwind components;
@tailwind utilities;

/* ===== Base Theme Variables (Dark Mode Aware) ===== */
@layer base {
  :root {
    --color-text: #111827;
    --color-bg: #FFFFFF;
    --color-card: #FFFFFF;
    --color-border: #E5E7EB;
    --color-accent: #7C3AED;
    --color-accent-hover: #9333EA;
    --color-danger: #EF4444;
    --color-success: #10B981;
    --color-warning: #F59E0B;
    --shadow-card: 0 4px 6px -1px rgba(0,0,0,0.1), 0 2px 4px -1px rgba(0,0,0,0.06);
    --shadow-glow: 0 0 15px rgba(124, 58, 237, 0.4);
  }

  .dark {
    --color-text: #F9FAFB;
    --color-bg: #111827;
    --color-card: #1F2937;
    --color-border: #374151;
    --color-accent: #A78BFA;
    --color-accent-hover: #C4B5FD;
    --color-danger: #F87171;
    --color-success: #34D399;
    --color-warning: #FBBF24;
    --shadow-card: 0 4px 6px -1px rgba(0,0,0,0.3), 0 2px 4px -1px rgba(0,0,0,0.2);
    --shadow-glow: 0 0 20px rgba(167, 139, 250, 0.5);
  }

  /* Global body reset and font */
  body {
    @apply bg-white dark:bg-gray-900 text-gray-900 dark:text-gray-100 font-sans antialiased;
    margin: 0; padding: 0;
    min-height: 100vh;
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
    transition: background-color 0.3s ease, color 0.3s ease;
  }

  body, button, input, select, textarea {
    font-family: Inter, -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
  }

  a {
    color: var(--color-accent);
    text-decoration: none;
    transition: color 0.2s ease-in-out;
  }
  a:hover, a:focus {
    color: var(--color-accent-hover);
    outline: none;
  }

  /* Headings */
  h1, h2, h3, h4, h5, h6 {
    color: var(--color-text);
    margin: 0 0 0.5em 0;
    font-weight: 700;
  }

  /* Paragraph */
  p {
    margin: 0 0 1em 0;
    line-height: 1.5;
    color: var(--color-text);
  }

  /* Container */
  .container {
    max-width: 1024px;
    margin-left: auto;
    margin-right: auto;
    padding-left: 1rem;
    padding-right: 1rem;
  }
}

/* ===== Components (Buttons, Cards, Inputs, Badges) ===== */
@layer components {
  .btn {
    @apply px-5 py-2.5 rounded-lg font-medium text-sm transition duration-200 focus:outline-none focus:ring-2 focus:ring-primary/50 disabled:opacity-60 disabled:cursor-not-allowed active:scale-95;
  }
  .btn-primary {
    @apply bg-primary text-white hover:bg-primary/90 dark:bg-secondary dark:hover:bg-secondary/90;
  }
  .btn-secondary {
    @apply bg-gray-200 text-gray-800 hover:bg-gray-300 dark:bg-gray-700 dark:text-gray-200 dark:hover:bg-gray-600;
  }
  .btn-danger {
    @apply bg-danger text-white hover:bg-danger/90;
  }
  .btn-outline {
    @apply border border-current hover:bg-gray-100 dark:hover:bg-gray-800;
  }
  .btn-sm {
    @apply px-3 py-1.5 text-xs;
  }

  .input, .textarea {
    @apply px-3 py-2 rounded-lg border border-gray-300 dark:border-gray-600
           bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100
           focus:outline-none focus:ring-2 focus:ring-primary/30 focus:border-transparent
           transition-colors w-full;
  }
  .textarea {
    @apply resize-y min-h-20;
  }

  .card {
    @apply bg-white dark:bg-gray-800 rounded-xl p-5 shadow-card border border-gray-200 dark:border-gray-700 transition-all duration-200;
  }

  .badge {
    @apply inline-flex px-2.5 py-0.5 rounded-full text-xs font-medium
           bg-gray-100 dark:bg-gray-700 text-gray-800 dark:text-gray-200;
  }
  .badge-accent {
    @apply bg-primary/15 text-primary dark:text-secondary;
  }
  .badge-success {
    @apply bg-success/15 text-success;
  }
  .badge-warning {
    @apply bg-warning/15 text-warning;
  }
  .badge-danger {
    @apply bg-danger/15 text-danger;
  }
}

/* ===== Utilities ===== */
@layer utilities {
  .no-select, .protected-input, .no-copy {
    user-select: none;
    -webkit-user-select: none;
    -moz-user-select: none;
    -ms-user-select: none;
    -webkit-touch-callout: none;
    -webkit-user-drag: none;
  }
  .scrollbar-none {
    -ms-overflow-style: none;
    scrollbar-width: none;
  }
  .scrollbar-none::-webkit-scrollbar {
    display: none;
  }
  .safe-top {
    padding-top: env(safe-area-inset-top);
  }
  .safe-bottom {
    padding-bottom: env(safe-area-inset-bottom);
  }
  .safe-edges {
    padding: env(safe-area-inset-top) env(safe-area-inset-right) env(safe-area-inset-bottom) env(safe-area-inset-left);
  }
  .fade-in {
    animation: fade-in 0.6s ease-out forwards;
  }
  @keyframes fade-in {
    from { opacity: 0; transform: translateY(10px); }
    to { opacity: 1; transform: translateY(0); }
  }
  .pulse {
    @apply animate-pulse;
  }
  .screen {
    min-height: 100vh;
    min-height: -webkit-fill-available;
  }
}

/* ===== Page Specific (general pattern) ===== */
.page {
  @apply container mx-auto px-4 py-6 safe-edges;
}
.page h1 {
  @apply text-3xl md:text-5xl font-bold mb-4;
  color: var(--color-text);
}

/* Responsive */
@media (max-width: 640px) {
  .btn {
    @apply px-4 py-2 text-sm;
  }
  .card {
    @apply p-4;
  }
  .page h1 {
    @apply text-2xl;
  }
}

/* ===== Dark Mode Support ===== */
html:not(.dark) {
  color-scheme: light;
}
html.dark {
  color-scheme: dark;
}
